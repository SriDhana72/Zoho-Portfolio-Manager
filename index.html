<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zoho Customer Portfolio Manager</title>
    <!-- Google Fonts - Inter -->
     <script src="https://cdn.tailwindcss.com"></script>
    <!-- Bootstrap Icons CDN for eye icon -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Link to external CSS file -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="nav-bar">
        <button class="tab-button active" data-tab="dashboard">Portfolio Manager Dashboard</button>
        <button class="tab-button" data-tab="merchant360">Account 360</button>
        <button class="tab-button" data-tab="qbrdeck">EBR Deck</button>
    </div>
    <div id="dashboard-content" class="widget-container">
        <div class="header-row">
            <div class="header-left">
                <img src="img/zoho.png" alt="zoho Logo" width="100" height="40">
                <span class="app-title">&nbsp;
                    Zoho Health Dashboard</span>
                    <title>Refresh Icon</title>

                    <!-- Refresh button -->
<!-- Refresh button -->
<button class="refresh-btn" onclick="handleRefresh(event)">
    <svg class="refresh-icon" viewBox="0 0 24 24">
        <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
    </svg>
</button>
            </div>
            <div class="header-right">
                <div class="search-container">
                    <input type="text" class="search-input" placeholder="Search customers...">
                    <span class="search-icon">&#128269;</span>
                </div>
                <select class="filter-select">
                    <option value="">Retail</option>
                    <option value="smb">Mid Market</option>
                    <option value="enterprise">Enterprise</option>
                </select>
                <select class="filter-select">
                    <option value="">All Industries</option>
                    <option value="tech">Technology</option>
                    <option value="finance">Finance</option>
                    <option value="education">Education</option>
                </select>
                <select class="filter-select">
                    <option value="">All Health Scores</option>
                    <option value="high">High</option>
                    <option value="medium">Medium</m>
                    <option value="low">Low</option>
                </select>
                <!-- Combined ARR filter capsule with clickable parts -->
                <div class="filter-capsule" id="filterArrCapsule">
                    <span id="arrLessThan5k" class="arr-filter-part">&lt; $5K</span>
                    <span class="separator-bar">|</span>
                    <span id="arrGreaterThan5k" class="arr-filter-part">&gt; $5K</span>
                </div>
                <div class="user-profile-toggle" id="userProfileToggle">
                    <div class="user-avatar" id="currentUserAvatar">LG</div>
                    <span class="user-name" id="currentUserName">Logan</span>
                    <span class="user-dropdown-arrow">&#9660;</span>
                </div>
                <div class="user-dropdown-menu" id="userDropdownMenu">
                    <ul>
                        <li data-name="Logan" data-initials="LG" class="selected">Logan</li>
                        <li data-name="Alice" data-initials="AS">Alice</li>
                        <li data-name="Bob" data-initials="BP">Bob</li>
                        <li data-name="Charlie" data-initials="CS">Charlie</li>
                    </ul>
                </div>
            </div>
        </div>
        <h2 class="section-title">Overview</h2>
        <div class="info-bar">
            <span>5000 Customers</span>
            <span class="separator"></span>
            <span>Last updated : Today, 10:15 AM</span>
        </div>
        <div class="cards-container">
            <!-- Card 1: Total ARR (MTD) - Now includes Active Accounts Details -->
            <div class="card">
                <span class="card-percentage-change">+12.4%</span>
                <div class="card-title">Total ARR (MTD)</div>
                <div class="card-value">$42.8M</div>
                <div class="card-comparison">vs $38.1M last month</div>
                <div class="primary-progress-bar-container">
                    <div class="primary-progress-bar-fill" style="width: 85%;"></div>
                </div>
                <div class="progress-details">
                    <span>Target : $50M</span>
                    <span class="achieved">85% achieved</span>
                </div>
                <!-- Active Accounts Details moved here -->
                <div class="secondary-progress-bar-container">
                    <div class="secondary-progress-bar-fill" style="width: 92%;"></div>
                </div>
                <div class="secondary-progress-details">
                    <span class="inactive-info">Active Accounts: 46 of 50</span>
                    <span class="active-percentage-info">92% active</span>
                </div>
            </div>
            <!-- Card 2: Upsell & Cross-sell (New Card) -->
            <div class="card">
                <div class="card-header-with-filter">
                    <div class="card-title"> Upsell & Cross-sell</div>
                    <select class="card-filter-select" id="upsellCrossSellFilter">
                        <option value="month"> Month &nbsp;</option>
                        <option value="quarter">Quarter &nbsp;</option>
                        <option value="year">Year &nbsp;</option>
                    </select>
                </div>
                <div class="upsell-cross-sell-card-content">
                    <div class="upsell-cross-sell-section">
                        <h4>Upsell</h4>
                        <div class="upsell-cross-sell-stats">
                            <div class="upsell-cross-sell-stat-item">
                                <span class="upsell-cross-sell-stat-value" id="upsellAccounts">25</span>
                                <span class="upsell-cross-sell-stat-label">Active Accounts</span>
                            </div>
                            <div class="upsell-cross-sell-stat-item">
                                <span class="upsell-cross-sell-stat-value revenue" id="upsellRevenue">$1.5M</span>
                                <span class="upsell-cross-sell-stat-label">Revenue Generated</span>
                            </div>
                        </div>
                        <div class="upsell-cross-sell-chart-container">
                            <canvas id="upsellChart"></canvas>
                        </div>
                    </div>
                    <!-- New Separator Bar -->
                    <div class="upsell-cross-sell-separator"></div>
                    <div class="upsell-cross-sell-section">
                        <h4>Cross-sell</h4>
                        <div class="upsell-cross-sell-stats">
                            <div class="upsell-cross-sell-stat-item">
                                <span class="upsell-cross-sell-stat-value" id="crossSellAccounts">18</span>
                                <span class="upsell-cross-sell-stat-label">Active Accounts</span>
                            </div>
                            <div class="upsell-cross-sell-stat-item">
                                <span class="upsell-cross-sell-stat-value revenue" id="crossSellRevenue">$0.8M</span>
                                <span class="upsell-cross-sell-stat-label">Revenue Generated</span>
                            </div>
                        </div>
                        <div class="upsell-cross-sell-chart-container">
                            <canvas id="crossSellChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Card 3: Product Adoption -->
            <div class="card">
                <div class="card-title">Product Adoption</div> <!-- Direct title now -->
                <span class="product-change">+5 this month</span> <!-- Keep this positioned absolutely -->
                <div class="product-items-container" id="productAdoptionContainer">
                    <!-- Products will be dynamically loaded here by JavaScript -->
                </div>
                <div class="show-all-products-wrapper"> <!-- New wrapper for positioning -->
                    <a href="#" class="show-all-products-link" id="showAllProductsLink">Show All Products</a>
                </div>
            </div>
            <!-- Card 4: Portfolio Health -->
            <div class="card">
                <div class="health-card-bg">
        <!-- Header Section -->
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold text-gray-800">Portfolio Health</h2>
            <div class="health-badge-container">
                <span id="healthStatusLabel" class="health-badge good">Good</span>
                <i id="infoIcon" class="bi bi-info-circle-fill text-gray-400 hover:text-gray-600 cursor-pointer text-lg"></i>

                <!-- Info Popup -->
                <div id="criteriaPopup" class="info-popup hidden">
                    <strong>Criteria:</strong>
                    <ul>
                        <li><i class="bi bi-star-fill text-yellow-500"></i>90: Excellent</li>
                        <li><i class="bi bi-check-circle-fill text-green-500"></i>70-89: Good</li>
                        <li><i class="bi bi-exclamation-triangle-fill text-orange-500"></i>41-69: Average</li>
                        <li><i class="bi bi-x-circle-fill text-red-500"></i>&lt;40: Poor</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Central Average Health Score (1-100) Display -->
        <div class="flex flex-col items-center mb-4">
            <div class="relative w-40 h-40 flex items-center justify-center rounded-full score-circle text-6xl font-extrabold shadow-2xl animate-pulse-once">
                74
            </div>
        </div>

        <!-- Pyramid Visualization -->
        <div class="flex flex-col items-center w-full space-y-2">
            <!-- Poor Segment (Top of the pyramid - smallest value) -->
            <div class="relative w-3/5 bg-red-light hover:bg-red-400 p-4 rounded-lg shadow-lg text-center transition-all duration-300 ease-in-out transform hover:scale-105 pyramid-segment">
                <span class="font-bold text-lg">Poor: 30</span> <span class="text-md">(7.5%)</span>
            </div>

            <!-- Average Segment (Middle of the pyramid) -->
            <div class="relative w-4/5 bg-yellow-light hover:bg-yellow-400 p-4 rounded-lg shadow-lg text-center transition-all duration-300 ease-in-out transform hover:scale-105 pyramid-segment">
                <span class="font-bold text-lg">Average: 250</span> <span class="text-md">(62.5%)</span>
            </div>

            <!-- Excellent Segment (Base of the pyramid - largest value) -->
            <div class="relative w-full bg-green-light hover:bg-green-400 p-4 rounded-lg shadow-lg text-center transition-all duration-300 ease-in-out transform hover:scale-105 pyramid-segment">
                <span class="font-bold text-lg">Excellent: 120</span> <span class="text-md">(30%)</span>
            </div>
        </div>
    </div>

            </div>
            <!-- NEW Card 5: Churn Insights (MTD) - Now dynamic with filter -->
            <div class="card">
                <div class="card-header-with-filter">
                    <div class="card-title">Churn Insights</div>
                    <select class="card-filter-select" id="churnFilter">
                        <option value="mtd">MTD &nbsp;</option>
                        <option value="qtr">QTR &nbsp;</option>
                        <option value="ytd">YTD &nbsp;</option>
                    </select>
                </div>
                <div class="churn-stats-grid">
                    <div class="churn-stat-item">
                        <div class="value" id="churnRate">3.5%</div>
                        <div class="label">Churn Rate</div>
                    </div>
                    <div class="churn-stat-item">
                        <div class="value" id="churnedAccounts">5</div>
                        <div class="label">Churned Accounts</div>
                    </div>
                    <div class="churn-stat-item">
                        <div class="value" id="revenueLost">$180K</div>
                        <div class="label">Revenue Lost</div>
                    </div>
                </div>
                <div class="at-risk-description" style="margin-top: 0; margin-bottom: 5px;">Top Reasons for Churn:</div>
                <ul class="churn-reasons-list" id="churnReasonsList"><li>Low Zoho product adoption (CRM, Books)</li><li>Lack of proactive support engagement</li><li>Competitive pricing/features</li></ul>
                <button class="churn-action-button" id="analyzeChurnBtn">Analyze Churned Accounts</button>
            </div>
        </div>
        <!-- Charts Section Wrapper -->
        <div class="charts-section-wrapper">
            <!-- ARR Trend Graphs Container -->
            <div class="arr-trend-section">
                <div class="arr-trend-header">
                    <h3>ARR Trend Comparison</h3>
                    <select class="arr-trend-dropdown" id="arrTrendFilter">
                        <option value="current">Current Year vs. Previous Year</option>
                        <option value="6months">Last 6 Months</option>
                        <option value="12months">Last 12 Months</option>
                        <option value="ytd">Year to Date</option>
                    </select>
                </div>
                <div class="arr-trend-canvas-container">
                    <canvas id="arrTrendChart"></canvas>
                </div>
            </div>
            <!-- NEW: Combination Chart (GMV & Conversion Rate) Section -->
            <div class="gmv-by-industry-section">
                <div class="gmv-header">
                    <h3>Combination Chart (ARR
                        
                        
                        
                        
                        & Conversion Rate)</h3>
                    <select class="gmv-dropdown">
                        <option value="mtd">MTD &nbsp;
                        </option>
                        <option value="qtr">QTR &nbsp;
                        </option>
                        <option value="ytd">YTD &nbsp;
                        </option>
                    </select>
                </div>
                <div class="chart-container">
                    <canvas id="gmvConversionChartCanvas"></canvas>
                </div>
            </div>
        </div>
        <!-- NEW Section: Customer Portfolio Table -->
       <div class="customer-portfolio-section">
            <div class="customer-portfolio-header">
                <h3>Customer Portfolio</h3>
                <div style="display: flex; gap: 10px;"> <!-- Container for filter buttons -->
                    <button class="control-button" id="openFilterModalBtn">
                        <span class="filter-icon">▼</span> Filter <!-- Unicode down arrow for filter -->
                    </button>
                </div>
            </div>
            <div class="merchant-table-wrapper">
                <table class="merchant-table">
                    <thead>
                        <tr>
                            <th data-column="name">
                                CUSTOMER
                                <span class="sort-icons">
                                    <span class="sort-icon asc active" data-direction="asc">▲</span>
                                    <span class="sort-icon desc" data-direction="desc">▼</span>
                                </span>
                            </th>
                            <th data-column="industry">
                                INDUSTRY
                                <span class="sort-icons">
                                    <span class="sort-icon asc" data-direction="asc">▲</span>
                                    <span class="sort-icon desc" data-direction="desc">▼</span>
                                </span>
                            </th>
                            <th data-column="industrySector">
                                INDUSTRY SECTOR
                                <span class="sort-icons">
                                    <span class="sort-icon asc" data-direction="asc">▲</span>
                                    <span class="sort-icon desc" data-direction="desc">▼</span>
                                </span>
                            </th>
                            <th data-column="arr">
                                ARR (MTD)
                                <span class="sort-icons">
                                    <span class="sort-icon asc" data-direction="asc">▲</span>
                                    <span class="sort-icon desc" data-direction="desc">▼</span>
                                </span>
                            </th>
                            <th data-column="products">
                                PRODUCTS
                                <span class="sort-icons">
                                    <span class="sort-icon asc" data-direction="asc">▲</span>
                                    <span class="sort-icon desc" data-direction="desc">▼</span>
                                </span>
                            </th>
                            <th data-column="healthScore">
                                HEALTH SCORE
                                <span class="sort-icons">
                                    <span class="sort-icon asc" data-direction="asc">▲</span>
                                    <span class="sort-icon desc" data-direction="desc">▼</span>
                                </span>
                            </th>
                            <th data-column="status">
                                STATUS
                                <span class="sort-icons">
                                    <span class="sort-icon asc" data-direction="asc">▲</span>
                                    <span class="sort-icon desc" data-direction="desc">▼</span>
                                </span>
                            </th>
                            <th data-column="lastInteraction">
                                LAST INTERACTION
                                <span class="sort-icons">
                                    <span class="sort-icon asc" data-direction="asc">▲</span>
                                    <span class="sort-icon desc" data-direction="desc">▼</span>
                                </span>
                            </th>
                            <th>ACTIONS</th>
                        </tr>
                    </thead>
                    <tbody id="merchantTableBody"><tr><td>
                    <div class="customer-info">
                        <div class="customer-initials-avatar" style="background-color: #a1887f;">
                            AT
                        </div>
                        <div class="customer-name-and-details">
                            <div class="customer-name">Artistic Trends</div>
                            <div class="customer-zuid">ZUID: 440108</div>
                        </div>
                    </div>
                </td><td>Arts &amp; Crafts</td><td>Creative Platforms</td><td>
                    <div class="arr-value">$890K</div>
                    <div class="arr-change positive">+7%</div>
                </td><td>
                    <span class="product-badge pg">PG</span>
                
                    <span class="product-badge books">Books</span>
                </td><td>
                    <div class="health-score-badge">
                        <div class="health-score-circle-small good">
                            75
                        </div>
                        <span class="health-score-text good">Good</span>
                    </div>
                </td><td><span class="status-badge active">Active</span></td><td>
                    <div class="last-interaction-content">
                        <span class="last-interaction-day">5 days ago</span>
                        <span class="last-interaction-type">New Feature</span>
                    </div>
                </td><td><a href="#" class="action-link">View</a></td></tr><tr><td>
                    <div class="customer-info">
                        <div class="customer-initials-avatar" style="background-color: #ab47bc;">
                            BC
                        </div>
                        <div class="customer-name-and-details">
                            <div class="customer-name">BuildCo Inc.</div>
                            <div class="customer-zuid">ZUID: 905065</div>
                        </div>
                    </div>
                </td><td>Construction</td><td>Real Estate Tech</td><td>
                    <div class="arr-value">$980K</div>
                    <div class="arr-change positive">+7.8%</div>
                </td><td>
                    <span class="product-badge pg">PG</span>
                
                    <span class="product-badge neo">Neo</span>
                </td><td>
                    <div class="health-score-badge">
                        <div class="health-score-circle-small good">
                            70
                        </div>
                        <span class="health-score-text good">Good</span>
                    </div>
                </td><td><span class="status-badge active">Active</span></td><td>
                    <div class="last-interaction-content">
                        <span class="last-interaction-day">2 weeks ago</span>
                        <span class="last-interaction-type">Follow-up</span>
                    </div>
                </td><td><a href="#" class="action-link">View</a></td></tr><tr><td>
                    <div class="customer-info">
                        <div class="customer-initials-avatar" style="background-color: #42a5f5;">
                            DC
                        </div>
                        <div class="customer-name-and-details">
                            <div class="customer-name">DataCloud Solutions</div>
                            <div class="customer-zuid">ZUID: 527166</div>
                        </div>
                    </div>
                </td><td>Tech</td><td>Cloud Services</td><td>
                    <div class="arr-value">$4.5M</div>
                    <div class="arr-change positive">+10.5%</div>
                </td><td>
                    <span class="product-badge pg">PG</span>
                
                    <span class="product-badge neo">Neo</span>
                
                    <span class="product-badge analytics">Analytics</span>
                </td><td>
                    <div class="health-score-badge">
                        <div class="health-score-circle-small excellent">
                            95
                        </div>
                        <span class="health-score-text excellent">Excellent</span>
                    </div>
                </td><td><span class="status-badge active">Active</span></td><td>
                    <div class="last-interaction-content">
                        <span class="last-interaction-day">Yesterday</span>
                        <span class="last-interaction-type">Data Sync</span>
                    </div>
                </td><td><a href="#" class="action-link">View</a></td></tr><tr><td>
                    <div class="customer-info">
                        <div class="customer-initials-avatar" style="background-color: #4CAF50;">
                            ER
                        </div>
                        <div class="customer-name-and-details">
                            <div class="customer-name">EduRight Academy</div>
                            <div class="customer-zuid">ZUID: 565412</div>
                        </div>
                    </div>
                </td><td>Education</td><td>E-learning</td><td>
                    <div class="arr-value">$940K</div>
                    <div class="arr-change positive">+24.2%</div>
                </td><td>
                    <span class="product-badge pg">PG</span>
                
                    <span class="product-badge neo">Neo</span>
                
                    <span class="product-badge pos">POS</span>
                </td><td>
                    <div class="health-score-badge">
                        <div class="health-score-circle-small excellent">
                            92
                        </div>
                        <span class="health-score-text excellent">Excellent</span>
                    </div>
                </td><td><span class="status-badge active">Active</span></td><td>
                    <div class="last-interaction-content">
                        <span class="last-interaction-day">3 days ago</span>
                        <span class="last-interaction-type">Product Demo</span>
                    </div>
                </td><td><a href="#" class="action-link">View</a></td></tr><tr><td>
                    <div class="customer-info">
                        <div class="customer-initials-avatar" style="background-color: #ef5350;">
                            FR
                        </div>
                        <div class="customer-name-and-details">
                            <div class="customer-name">Fashion Retail Co.</div>
                            <div class="customer-zuid">ZUID: 873402</div>
                        </div>
                    </div>
                </td><td>Retail</td><td>Apparel &amp; Accessories</td><td>
                    <div class="arr-value">$2.2M</div>
                    <div class="arr-change negative">-3.5%</div>
                </td><td>
                    <span class="product-badge pg">PG</span>
                
                    <span class="product-badge pos">POS</span>
                
                    <span class="product-badge engage">Engage</span>
                </td><td>
                    <div class="health-score-badge">
                        <div class="health-score-circle-small good">
                            68
                        </div>
                        <span class="health-score-text good">Good</span>
                    </div>
                </td><td><span class="status-badge at-risk">At Risk</span></td><td>
                    <div class="last-interaction-content">
                        <span class="last-interaction-day">1 week ago</span>
                        <span class="last-interaction-type">Support Call</span>
                    </div>
                </td><td><a href="#" class="action-link">View</a></td></tr></tbody>
                </table>
            </div>
            <div class="pagination-container">
                <div class="pagination-info" id="paginationInfo">Showing 1 to 5 of 11 customers</div>
                <div class="pagination-controls">
                    <button class="pagination-button" id="prevPageBtn" disabled="">&lt;</button>
                    <div id="pageNumbers"><button class="pagination-button active-page">1</button><button class="pagination-button">2</button><button class="pagination-button">3</button></div>
                    <button class="pagination-button" id="nextPageBtn">&gt;</button>
                </div>
            </div>
        </div>
        <!-- NEW: Container for Action Items, Growth Opportunities, and At-Risk Merchants to display side-by-side -->
        <div class="side-by-side-sections">
            <!-- Action Items Section -->
            <div class="action-items-section">
                <div class="action-items-header">
                    <h3>Action Items</h3>
                    <span class="pending-badge">3 pending</span>
                </div>
                <div class="action-items-grid">
                    <!-- Action Item 1: Danger (Red) -->
                    <div class="action-item-card danger">
                        <span class="action-item-icon">&#9888;</span> <!-- Exclamation icon -->
                        <div class="action-item-content">
                            <div class="action-item-title">Contract Renewal: Fashion Retail Co.</div>
                            <div class="action-item-description">Due in 5 days</div>
                            <button class="action-item-button">Schedule Call</button>
                        </div>
                    </div>
                    <!-- Action Item 2: Warning (Yellow) -->
                    <div class="action-item-card warning">
                        <span class="action-item-icon">&#9888;</span> <!-- Exclamation icon -->
                        <div class="action-item-content">
                            <div class="action-item-title">Payment Failures: HealthTech Solutions</div>
                            <div class="action-item-description">3.5% increase in failures</div>
                            <button class="action-item-button yellow">Investigate</button>
                        </div>
                    </div>
                    <!-- Action Item 3: Info (Blue) -->
                    <div class="action-item-card info">
                        <span class="action-item-icon">&#9998;</span> <!-- Pencil icon -->
                        <div class="action-item-content">
                            <div class="action-item-title">QBR Preparation: Global SaaS Inc.</div>
                            <div class="action-item-description">Scheduled for next week</div>
                            <button class="action-item-button">Prepare Report</button>
                        </div>
                    </div>
                </div>
                <a href="#" class="view-all-link">View All Action Items</a>
            </div>
            <!-- Growth Opportunities Section -->
            
<div class="growth-opportunities-section">
    <div class="growth-opportunities-header">
        <div class="growth-opportunities-header-content">
            <h3>Growth Opportunities</h3>
            <select class="card-filter-select" id="growthOpportunityFilter">
                <option value="upsell">Upsell</option>
                <option value="cross-sell">Cross-sell &nbsp;
                </option>
            </select>
        </div>
        <span class="identified-badge" id="growthOpportunitiesBadge">3 identified</span>
    </div>
    <div class="opportunities-grid" id="opportunitiesGrid"><div class="opportunity-card">
        <div class="opportunity-content">
            <div class="opportunity-title">CRM Advanced Feature Upsell</div>
            <div class="opportunity-description">Offer advanced CRM features like SalesIQ and workflow automation to 20 clients.</div>
            <div class="opportunity-progress-bar-container">
                <div class="opportunity-progress-bar-fill" style="width: 40%;"></div>
            </div>
            <div class="opportunity-stats">
                <span>20/50 clients</span>
                <span class="value">$150K opportunity</span>
            </div>
        </div>
    </div><div class="opportunity-card">
        <div class="opportunity-content">
            <div class="opportunity-title">Zoho One Suite Upgrade</div>
            <div class="opportunity-description">Propose Zoho One to 10 clients currently using 3+ individual Zoho apps.</div>
            <div class="opportunity-progress-bar-container">
                <div class="opportunity-progress-bar-fill" style="width: 20%;"></div>
            </div>
            <div class="opportunity-stats">
                <span>10/50 clients</span>
                <span class="value">$250K opportunity</span>
            </div>
        </div>
    </div><div class="opportunity-card">
        <div class="opportunity-content">
            <div class="opportunity-title">Analytics Premium Plan</div>
            <div class="opportunity-description">Target 15 clients for an upgrade to Zoho Analytics Premium features.</div>
            <div class="opportunity-progress-bar-container">
                <div class="opportunity-progress-bar-fill" style="width: 30%;"></div>
            </div>
            <div class="opportunity-stats">
                <span>15/50 clients</span>
                <span class="value">$80K opportunity</span>
            </div>
        </div>
    </div></div>
    <a href="#" class="view-all-link">View All Opportunities</a>
</div>

            <!-- NEW: At-Risk Merchants Section (Zoho Business Focus) -->
            <div class="at-risk-merchants-section">
                <div class="at-risk-merchants-header">
                    <h3>At-Risk Accounts</h3>
                    <span class="merchants-badge">4 accounts</span>
                </div>
                <div class="at-risk-merchants-grid">
                    <!-- At-Risk Account 1: Low CRM Usage -->
                    <div class="at-risk-card">
                        <div class="at-risk-merchant-avatar">AC</div>
                        <div class="at-risk-content">
                            <div class="at-risk-main-info-row">
                                <div class="at-risk-text-details">
                                    <span class="at-risk-merchant-name">Alpha Corp</span>
                                    <span class="at-risk-sub-info">-5.2% Engagement • Health: 58</span>
                                </div>
                                <div class="at-risk-health-score-circle">58</div>
                            </div>
                            <div class="at-risk-description">Risk Factors:</div>
                            <ul class="risk-factors-list">
                                <li>Low CRM feature adoption (SalesIQ, Campaigns)</li>
                                <li>No recent support interactions (passive churn risk)</li>
                            </ul>
                            <button class="schedule-button">Initiate Engagement</button>
                        </div>
                    </div>
                    <!-- At-Risk Account 2: Overdue Invoices & Books Issues -->
                    <div class="at-risk-card">
                        <div class="at-risk-merchant-avatar">BS</div>
                        <div class="at-risk-content">
                            <div class="at-risk-main-info-row">
                                <div class="at-risk-text-details">
                                    <span class="at-risk-merchant-name">Beta Solutions</span>
                                    <span class="at-risk-sub-info">-2.1% Payment Rate • Health: 34</span>
                                </div>
                                <div class="at-risk-health-score-circle">34</div>
                            </div>
                            <div class="at-risk-description">Risk Factors:</div>
                            <ul class="risk-factors-list">
                                <li>2 invoices overdue by 30+ days in Zoho Books</li>
                                <li>Unresolved integration errors with external payment gateway</li>
                            </ul>
                            <button class="schedule-button">Follow-up on Payments</button>
                        </div>
                    </div>
                </div>
                <a href="#" class="view-all-link">View All At-Risk Accounts</a>
            </div>
        </div>
    </div>
    <!-- Merchant 360 Content (Initially hidden) -->
     <div id="merchant-360-content" class="widget-container-bg" frameborder="0">
       <div class="iframe-container" >
            <iframe src="https://sridhana72.github.io/Accounts-Module/"></iframe>
        </div> 
    </div>
    <!-- QBR Deck Content (Initially hidden) -->
    <div id="qbr-deck-content" class="dynamic-content-bg" frameborder="0">
       <div class="iframe-container">
         <iframe src="https://sridhana72.github.io/QBR-Deck--1/"></iframe>
        </div> 
    </div>

    
    <!-- Filter Modal Structure -->
    <div id="filterModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Apply Filters</h2>
                <span class="modal-close-btn" id="closeFilterModalBtn">&times;</span>
            </div>
            <div class="modal-body" id="filterModalBody">
                <p style="font-size: 0.9em; color: #616161; margin-top: 0;">Add one or more conditions to filter the customer table.</p>
                <!-- Dynamic filter rows will be added here -->
            </div>
            <button class="add-filter-btn" id="addFilterRowBtn">
                <span>+</span> Add another filter
            </button>
            <div class="modal-footer">
                <button class="clear-all-btn" id="clearAllFiltersBtn">Clear All</button>
                <button class="apply-filters-btn" id="applyFiltersBtn">Apply Filters</button>
            </div>
        </div>
    </div>
    <!-- Sort Modal Structure -->
    <div id="sortModal" class="modal-overlay">
        <div class="modal-content sort-modal-content">
            <div class="modal-header">
                <h2>Sort Table</h2>
                <span class="modal-close-btn" id="closeSortModalBtn">&times;</span>
            </div>
            <div class="modal-body">
                <p style="font-size: 0.9em; color: #616161; margin-top: 0;">Select a column and a direction to sort the customer table.</p>
                <div class="sort-option-row">
                    <span class="modal-label">Column</span>
                    <select id="sortColumnSelect">
                        <option value="name">CUSTOMER</option>
                        <option value="industry">INDUSTRY</option>
                        <option value="industrySector">INDUSTRY SECTOR</option>
                        <option value="arr">ARR</option>
                        <option value="products">PRODUCTS</option>
                        <option value="healthScore">HEALTH SCORE</option>
                        <option value="status">STATUS</option>
                        <option value="lastInteraction">LAST INTERACTION</option>
                    </select>
                </div>
                <div class="sort-option-row">
                    <span class="modal-label">Direction</span>
                    <button class="sort-direction-btn active" id="sortAscendingBtn" data-direction="asc">
                        <svg viewBox="0 0 24 24"><path d="M12 2L6.5 7h11L12 2zm-5 15h10v2H7zm0-4h10v2H7zm0-4h10v2H7z"/></svg> Ascending
                    </button>
                    <button class="sort-direction-btn" id="sortDescendingBtn" data-direction="desc">
                        <svg viewBox="0 0 24 24"><path d="M12 22l5.5-5h-11L12 22zm5-15H7V5h10zm0-4H7V1h10z"/></svg> Descending
                    </button>
                </div>
            </div>
            <div class="modal-footer">
                <button class="clear-all-btn" id="clearSortBtn">Clear Sort</button>
                <button class="apply-sort-btn" id="applySortBtn">Apply Sort</button>
            </div>
        </div>
    </div>
    <!-- New: All Products Modal Structure -->
    <div id="allProductsModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>All Zoho Products</h2>
                <span class="modal-close-btn" id="closeAllProductsModalBtn">&times;</span>
            </div>
            <div class="modal-body" id="allProductsModalBody" style="max-height: 400px; overflow-y: auto;">
                <!-- Full list of products will be loaded here -->
            </div>
            <div class="modal-footer" style="justify-content: center;">
                 <button class="clear-all-btn" id="closeAllProductsModalFooterBtn">Close</button>
            </div>
        </div>
    </div>
    <!-- NEW: Churn Analysis Modal Structure -->
   <div id="churnAnalysisModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Churn Analysis Report</h2>
                <span class="modal-close-btn" id="closeChurnAnalysisModalBtn">×</span>
            </div>
            <div class="modal-body">
                <h3><span class="churn-icon blue">📈</span> Overview of Churned Accounts</h3>
                <p>This report provides a deeper look into accounts that have churned recently, focusing on key metrics and underlying reasons within the Zoho ecosystem.</p>
                <div class="detail-item">
                    <span class="label"><span class="churn-icon red">👤</span> Total Churned Accounts:</span>
                    <span class="value" id="modalChurnedAccounts">5</span>
                </div>
                <div class="detail-item">
                    <span class="label"><span class="churn-icon red">💰</span> Total Revenue Lost:</span>
                    <span class="value" id="modalRevenueLost">$180,000</span>
                </div>
                <div class="detail-item">
                    <span class="label"><span class="churn-icon yellow">💵</span> Average Contract Value (ACV) of Churned:</span>
                    <span class="value" id="modalAverageAcv">$36,000</span>
                </div>
                <div class="detail-item">
                    <span class="label"><span class="churn-icon red">📉</span> Highest Churn Period:</span>
                    <span class="value" id="modalHighestChurnPeriod">This Month (3.5%)</span>
                </div>
                <hr style="border: 0; height: 1px; background-color: #eee; margin: 20px 0;">

                <h3><span class="churn-icon green">📊</span> Key Product Usage Correlates</h3>
                <p>Analysis shows that a significant portion of churned accounts exhibited low engagement with critical Zoho products or features:</p>
                <ul class="suggestions-list">
                    <li><strong style="font-weight: 600;">Zoho CRM:</strong> Accounts often had incomplete contact data or infrequent sales activity logging.</li>
                    <li><strong style="font-weight: 600;">Zoho Books:</strong> High incidence of delayed payments or unlinked invoicing, indicating financial health issues.</li>
                    <li><strong style="font-weight: 600;">Zoho Desk:</strong> Limited use of helpdesk features, suggesting unaddressed customer support needs.</li>
                    <li><strong style="font-weight: 600;">Zoho Analytics:</strong> Low adoption of reporting tools, leading to a lack of data-driven decision-making.</li>
                </ul>
                <hr style="border: 0; height: 1px; background-color: #eee; margin: 20px 0;">

                <h3><span class="churn-icon yellow">📣</span> Common Feedback &amp; Trends</h3>
                <p>Based on exit surveys and account manager notes, common themes include:</p>
                <ul class="suggestions-list">
                    <li><strong style="font-weight: 600;">Feature Parity:</strong> Perception of competitors offering more specialized features (e.g., advanced marketing automation).</li>
                    <li><strong style="font-weight: 600;">Onboarding Gaps:</strong> Initial setup challenges or lack of comprehensive training on integrated Zoho solutions.</li>
                    <li><strong style="font-weight: 600;">Cost vs. Value:</strong> Some SMBs found advanced features overwhelming or not cost-effective for their specific needs.</li>
                </ul>
                <hr style="border: 0; height: 1px; background-color: #eee; margin: 20px 0;">

                <h3><span class="churn-icon blue">💡</span> Suggested Retention Strategies</h3>
                <ul class="suggestions-list">
                    <li>Implement <strong style="font-weight: 600;">proactive health checks</strong> for accounts with low CRM/Books activity.</li>
                    <li>Offer <strong style="font-weight: 600;">targeted feature adoption workshops</strong> for specific Zoho products like Desk or Analytics.</li>
                    <li>Develop a <strong style="font-weight: 600;">personalized onboarding journey</strong> emphasizing cross-product integration.</li>
                    <li>Engage "at-risk" accounts with <strong style="font-weight: 600;">exclusive webinars</strong> showcasing new Zoho features or success stories.</li>
                </ul>
            </div>
            <div class="modal-footer" style="justify-content: center;">
                 <button class="clear-all-btn" id="closeChurnAnalysisModalFooterBtn">Close</button>
            </div>
        </div>
    </div>
    <!-- Chart.js for data visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Link to external JavaScript file -->
    <script src="script.js"></script>
</body>
</html>

